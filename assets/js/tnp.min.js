$(function(){function a(){for(var a=$("#addSecondaryForm #first_name").val(),b=$("#addSecondaryForm #last_name").val(),c=$("#addSecondaryForm #phone").val(),d=$("#addSecondaryForm #email").val(),e=$("#addSecondaryForm #user_id").val(),f=[[a,"First name"],[b,"Last name"],[c,"Phone number"],[d,"Email address"]],g=!1,h=0;h<f.length;h++){var i=$.trim(f[h][0]);if(i.length>0){g=!0;break}}if(!g)return alert("At least one field must be filled."),!1;d=d.replace("@","-110-");var j="/index.php/Clients/addSecondaryContact/";""===a&&(a="null"),""===b&&(b="null"),""===d&&(d="null"),""===c&&(c="null"),j+=a+"/",j+=b+"/",j+=d+"/",j+=c+"/",j+=e,$.ajax({type:"POST",url:j,success:function(a){return document.location="/index.php/Clients/details/"+e,!1}})}if($("input[type=submit], a:not(.notBtn), button").button().click(function(a){}),$(".tabs").tabs(),$(document).tooltip(),$(".dataTable").DataTable({iDisplayLength:50,initComplete:function(){this.api().columns().every(function(){var a=this,b=$(a.header()).text(),c=["Company","Contact"];if(c.indexOf(b)==-1){var d=$('<select><option value=""></option></select>').appendTo($(a.footer()).empty()).on("change",function(){var b=$.fn.dataTable.util.escapeRegex($(this).val());a.search(b?"^"+b+"$":"",!0,!1).draw()});a.data().unique().sort().each(function(a,b){d.append('<option value="'+a+'">'+a+"</option>")})}})}}),$("#grand_total")){var b=$("#grand_total #tally").html(),c=$(".totalBox .value.grandTotal");c.text(b)}$(".dateMe").datepicker({changeMonth:!0,changeYear:!0}),$("input:submit").click(function(){$(this).hide()}),$(".accordion").accordion({active:!1,heightStyle:"content",collapsible:!0}),$("#articles .clickable").bind("click",function(){document.location.href="/index.php/Articles/details/"+$(this).attr("data-id")}),$("#assignArticles tr td a.assign").bind("click",function(a){a.preventDefault();var b=$(this).attr("data-article"),c=$("#"+b+"_article_edition_month option:selected").val(),d=$("#"+b+"_article_edition_year option:selected").val(),e=$(this).attr("href"),f=e+"/"+d+"-"+c;document.location=f});var d=$("#assignArticles").dataTable({iDisplayLength:50});$(".newFilter").bind("click",function(){var a=$('input:checkbox[name="category"]:checked').map(function(){return"^"+this.value+"$"}).get().join("|");d.fnFilter(a,1,!0,!1,!1,!1);var b=$('input:checkbox[name="demographic"]:checked').map(function(){return this.value}).get().join("|");d.fnFilter(b,2,!1,!1,!1,!1)}),$statusField=$(".frmClient select[name='status']"),$statusField&&($returnRow=$(".frmClient #returnDateRow"),$returnField=$(".frmClient #return_date"),"on hold"!==$statusField.val()&&($returnField.attr({disabled:"disabled"}),$returnRow.addClass("ghost")),$statusField.change(function(){"on hold"===$statusField.val()?($returnRow.removeClass("ghost"),$returnField.removeAttr("disabled").focus()):($returnRow.addClass("ghost"),$returnField.attr({disabled:"disabled"}))})),$mailScheduleText=$(".frmClient #mailing_schedule_text"),$mailScheduleSelect=$(".frmClient #mailing_schedule_select"),$mailScheduleText&&($mailScheduleText.bind("change keypress keydown",function(){$mailScheduleSelect.val("")}),$mailScheduleSelect.bind("change",function(){"unique"===$mailScheduleSelect.val()&&($("#flipToSelect").show(),$mailScheduleText.removeAttr("disabled").css({display:"block"}).focus(),$mailScheduleSelect.attr({disabled:"disabled"}).css({display:"none"}))}),$("#flipToSelect").click(function(a){a.preventDefault(),$mailScheduleText.attr({disabled:"disabled"}).css({display:"none"}),$mailScheduleSelect.removeAttr("disabled").css({display:"block"}).val("").focus(),$(this).hide()})),$("#company").blur(function(){me=$(this),""!==me.val()&&$.ajax({url:"/index.php/clients/checkifexists/"+me.val()}).done(function(a){a&&$("#company_already_added").dialog({modal:!0,buttons:{Ok:function(){$(this).dialog("close"),$("#company").focus()}}})})}),$(".clientsUnassign").bind("click",function(a){a.preventDefault();var b=$(this).attr("href");$("#dialog-confirm").dialog({resizable:!1,height:250,width:375,modal:!0,buttons:{Unassign:function(){document.location.href=b,$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})}),$("#openSecondaryContactModal").bind("click",function(b){b.preventDefault(),$("#addSecondaryForm").dialog({height:450,width:400,modal:!0,buttons:{"Add Contact Information":a,Cancel:function(){$(this).dialog("close")}}})}),$(".hrefConfirm").bind("click",function(a){a.preventDefault();var b=$(this).attr("href");$("#hrefConfirm").dialog({resizable:!1,height:250,width:375,modal:!0,buttons:{Proceed:function(){document.location.href=b,$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})}),$("#frmCustomReport").submit(function(a){if(a.preventDefault(),$("#frmCustomReport input:checkbox:checked").length>0){var b=$("#results");b.html("");var c=$(this).serialize();$.post("/index.php/Customreport/process",c,function(a){for(var c=JSON.parse(a),d=0;d<c.length;d++){myObj=c[d];var e=$("<tr />");b.append(e);for(var f in myObj)if(myObj.hasOwnProperty(f)){var g=myObj[f];null===g&&(g=""),e.append($("<td>"+g+"</td>"))}}var h=$("<thead />");b.append(h),$("input:checked").each(function(){var a=$(this).closest("div").text();h.append("<th>"+a+"</th>")}),$("html, body").animate({scrollTop:b.offset().top},1e3)}).fail(function(a,b,d){console.log("AJAX Failure:"),console.log(c),console.log(a),console.log(b),console.log(d)}).always(function(){console.log("AJAX completed.")})}else alert("Please select at least one field to view.");$("input:submit").show()})});